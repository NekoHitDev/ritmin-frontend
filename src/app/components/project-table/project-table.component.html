<p-panel header="Browse">
  <div>
    <p-table [value]="projects" styleClass="p-datatable-sm p-datatable-responsive-demo" [autoLayout]="true"
             [loading]="isLoading" [paginator]="true"
             [rows]="20" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,20,50]" [totalRecords]="projects.length"
             sortField="creationTimestamp" [sortOrder]="-1"
             currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" stateStorage="session"
             stateKey="pennycapstable-session"
             [responsive]="true">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="identifier">Identifier
            <p-sortIcon field="identifier"></p-sortIcon>
          </th>
          <th pSortableColumn="description">Description
            <p-sortIcon field="description"></p-sortIcon>
          </th>
          <th pSortableColumn="maxTokenSoldCount">Tokens
            <p-sortIcon field="maxTokenSoldCount"></p-sortIcon>
          </th>
          <th pSortableColumn="stakePer100Token">Stake Rate
            <p-sortIcon field="stakePer100Token"></p-sortIcon>
          </th>
          <th pSortableColumn="status">Status
            <p-sortIcon field="status"></p-sortIcon>
          </th>
          <th pSortableColumn="progress">Progress
            <p-sortIcon field="progress"></p-sortIcon>
          </th>
          <th pSortableColumn="creationTimestamp">Created
            <p-sortIcon field="creationTimestamp"></p-sortIcon>
          </th>
          <th pSortableColumn="buyerCount">Buyers
            <p-sortIcon field="buyerCount"></p-sortIcon>
          </th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-project>
        <tr>
          <td>{{project.identifier}}</td>
          <td>{{project.description | truncate: [60, '...']}}</td>
          <td>
            {{project.maxTokenSoldCount | number}}
          <td>
            {{project.stakePer100Token}}
          </td>
          <td>
            <p-tag [value]="project.status === 'ONGOING' ? project.stage : project.status"
                   [severity]="getStatusTag(project.status === 'ONGOING' ? project.stage : project.status)"></p-tag>
          </td>
          <td>
            <p-progressBar [value]="getProgress(project)"></p-progressBar>
          </td>
          <td>{{project.creationTimestamp | timeAgo}}</td>
          <td>
            {{project.buyerCount}}
          </td>
          <td>
            <button pButton type="button" label="Details"
                    icon="pi pi-search" class="p-button-outlined"
                    [routerLink]="['/projects' , project.identifier]"
            ></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</p-panel>

