<h1>Add Milestones</h1>
<ng-container *ngIf="milestones.length; else noMilestones" >
  <p-table [value]="milestones" styleClass="p-datatable-sm">
    <ng-template pTemplate="header">
        <tr>
            <th>#</th>
            <th>Set threshold</th>
            <th>Title</th>
            <th>Description</th>
            <th>End Date</th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ms>
        <tr>
            <td>{{getIndex(ms.endTimestamp) + 1}}</td>
            <td><p-checkbox name="groupname" [binary]="true" [(ngModel)]="ms.isThreshold" (click)="setThreshhold(ms)"></p-checkbox></td>
            <td>{{ms.title}}</td>
            <td>{{ms.description}}</td>
            <td>{{ms.endTimestamp | date: 'longDate'}}</td>
            <td><button pButton label="Remove" icon="pi pi-times" class="p-button-danger" (click)="onRemove(ms)"></button></td>
        </tr>
    </ng-template>
  </p-table>
</ng-container>
<ng-template #noMilestones>
  <div class="p-d-flex">
    <i><small>You have not added a milestone yet</small></i>
  </div>
</ng-template>

<p-divider></p-divider>
  <form [formGroup]="form">

    <h4>Title</h4>
    <small>
      Here comes the title description
    </small>
    <div class="p-fluid">
      <input pInputText formControlName="title"/>
    </div>

    <h4>Description</h4>
    <small>
      Describe what your WCA is about in 2-3 short but precise sentences.
      Add a link which leads to your project website which may show more information
      about your goals.
    </small>
    <div class="p-fluid">
      <textarea [rows]="5" [cols]="30" pInputTextarea [autoResize]="true" formControlName="description"></textarea>
    </div>

    <h4>Milestone End</h4>
    <small>
      Here comes the Milestone End description
    </small>
    <div class="p-fluid">
      <p-calendar formControlName="endTimestamp" [minDate]="minDate" [readonlyInput]="true"></p-calendar>
    </div>
    <div class="p-fluid p-mt-2">
      <button pButton label="Add" icon="pi pi-plus" type="submit" [disabled]="!form.valid" (click)="onAdd()"></button>
    </div>
    <div class="p-d-flex p-jc-between p-mt-2">
      <button pButton label="Go back" icon="pi pi-caret-left" (click)="onBefore()"></button>
      <button pButton label="Next" icon="pi pi-caret-right" [disabled]="!milestones.length" (click)="onNext()"></button>
    </div>
  </form>
